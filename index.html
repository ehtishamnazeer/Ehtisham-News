<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Ehtisham News | Elite Gaming Portal</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
:root {
  --gold: #c9a23f;
  --gold-glow: rgba(201, 162, 63, 0.4);
  --thermal-bg: radial-gradient(circle at 50% -20%, #2a2210, #0a0a0a 80%);
  --glass: rgba(255, 255, 255, 0.03);
  --glass-border: rgba(255, 255, 255, 0.08);
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background: #050505;
  background-image: var(--thermal-bg);
  background-attachment: fixed;
  color: #e0e0e0;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* --- SPLASH --- */
#splash {
  position: fixed;
  inset: 0;
  background: #000;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 10000;
}

/* --- HEADER --- */
header {
  padding: 30px 20px;
  max-width: 800px;
  width: 100%;
  margin: 0 auto;
}

header h2 { margin: 0; font-size: 1.8rem; font-weight: 800; font-family: 'Inter'; cursor: pointer; }
header h2 span { color: var(--gold); }

/* --- MAIN CONTENT AREA --- */
main { flex: 1; }

.container { padding: 0 20px 40px; max-width: 800px; margin: 0 auto; }

.card {
  background: var(--glass);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border-radius: 20px;
  padding: 24px;
  margin-bottom: 20px;
  border: 1px solid var(--glass-border);
  transition: 0.3s;
  cursor: pointer;
}

.card:active { transform: scale(0.97); }

/* --- FOOTER (FIXED) --- */
footer {
  margin-top: auto;
  padding: 40px 20px;
  background: rgba(0,0,0,0.8);
  text-align: center;
  z-index: 100; /* Taake links clickable hon */
  position: relative;
}

.social-links { margin-bottom: 15px; }
.social-links a {
  color: var(--gold);
  text-decoration: none;
  font-size: 0.9rem;
  margin: 0 12px;
  font-weight: 600;
  display: inline-block; /* Click area behtar karne ke liye */
  padding: 5px;
}

.contact-info {
  font-size: 0.8rem;
  color: #888;
  margin-top: 10px;
}

/* --- PAGES --- */
.page { display: none; animation: slideUp 0.6s ease; }

@keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

/* --- NOTIFICATION & INSTALL POPUPS --- */
#installToast {
  position: fixed;
  bottom: 25px; left: 20px; right: 20px;
  background: #fff;
  color: #000;
  padding: 18px;
  border-radius: 16px;
  display: none; /* JS control karega */
  justify-content: space-between;
  align-items: center;
  z-index: 9999;
  box-shadow: 0 20px 40px rgba(0,0,0,0.5);
}
</style>
</head>

<body>

<div id="splash">
  <h1>Ehtisham <span>News</span></h1>
  <div style="width:40px; height:2px; background:var(--gold); margin-top:20px;"></div>
</div>

<header>
  <h2 onclick="goHome()">Ehtisham <span>News</span></h2>
</header>

<main>
    <div id="home" class="page" style="display: block;">
      <div class="container">
        <div class="card" onclick="openCategory('gaming')">
          <h3>üî• Gaming News</h3>
          <p>Latest AAA titles and leaks.</p>
        </div>
        <div class="card" onclick="openCategory('esports')">
          <h3>üèÜ Esports</h3>
          <p>Pro tournament updates.</p>
        </div>
        <div class="card" onclick="openCategory('community')">
          <h3>üë• Community</h3>
          <p>Connect with gamers.</p>
        </div>
      </div>
    </div>

    <div id="newsList" class="page">
      <div class="container">
        <h2 id="catTitle" style="color:var(--gold)"></h2>
        <div id="newsItems"></div>
        <button onclick="goHome()" style="background:#222; color:#fff; border:none; padding:10px 20px; border-radius:10px; margin-top:20px;">‚¨Ö BACK</button>
      </div>
    </div>

    <div id="newsView" class="page">
      <div class="container">
        <h2 id="viewTitle"></h2>
        <p id="viewContent" style="line-height:1.8; color:#ccc;"></p>
        <button onclick="goBack()" style="background:var(--gold); border:none; padding:10px 20px; border-radius:10px;">‚¨Ö BACK</button>
      </div>
    </div>
</main>

<footer>
  <div class="social-links">
    <a href="https://whatsapp.com/channel/0029VaFurLDD8SE2bbOUxy1L" target="_blank">WhatsApp</a>
    <a href="https://www.facebook.com/share/16UChCgJTn/" target="_blank">Facebook</a>
    <a href="https://www.instagram.com/ehtisham_nazeer" target="_blank">Instagram</a>
    <a href="https://www.tiktok.com/@ehtishamnazeer1" target="_blank">TikTok</a>
  </div>
  <div class="contact-info">
    Contact Us: <a href="mailto:support@ehtishamnews.com" style="color:#888; margin:0;">support@ehtishamnews.com</a>
  </div>
</footer>

<div id="installToast">
  <span style="font-weight:700;">Install Ehtisham News?</span>
  <button id="btnInstall" style="background:#000; color:#fff; border:none; padding:8px 15px; border-radius:8px;">Install</button>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyC9Cfh60ZyeZTbhK45a_sKWBFCy8DrqDao",
  authDomain:"ehtisham-news.firebaseapp.com",
  projectId:"ehtisham-news"
});
const db = firebase.firestore();

// Splash Exit
window.addEventListener('load', () => {
  setTimeout(() => {
    document.getElementById('splash').style.opacity = '0';
    setTimeout(() => document.getElementById('splash').remove(), 600);
  }, 2000);
});

// Navigation
function showPage(id) {
  document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
  document.getElementById(id).style.display = 'block';
  window.scrollTo(0,0);
}

function openCategory(cat) {
  showPage('newsList');
  document.getElementById("catTitle").innerText = cat.toUpperCase();
  db.collection("news").where("category","==",cat).orderBy("date","desc").get()
    .then(snap => {
      let html = "";
      snap.forEach(d => {
        html += `<div class="card" onclick="openNews('${d.id}','${cat}')"><h3>${d.data().title}</h3><p>${d.data().content.substring(0,80)}...</p></div>`;
      });
      document.getElementById("newsItems").innerHTML = html || "No News Found.";
    });
}

function openNews(id, cat) {
  showPage('newsView');
  db.collection("news").doc(id).get().then(d => {
    document.getElementById("viewTitle").innerText = d.data().title;
    document.getElementById("viewContent").innerText = d.data().content;
  });
}

function goHome() { showPage('home'); }
function goBack() { showPage('newsList'); }

/* --- WHY POPUPS DON'T SHOW --- */
// 1. Notifications: Sirf HTTPS par kaam karti hain.
// 2. Install Prompt: Iske liye 'Manifest' file zaroori hai.

let deferredPrompt;
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  document.getElementById('installToast').style.display = 'flex';
});

document.getElementById('btnInstall').onclick = () => {
  document.getElementById('installToast').style.display = 'none';
  deferredPrompt.prompt();
};

// Notification Logic
if ("Notification" in window) {
  if (Notification.permission !== "granted") {
    Notification.requestPermission();
  }
}
</script>

</body>
</html>
