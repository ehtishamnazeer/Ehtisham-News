<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ehtisham News</title>

<meta name="theme-color" content="#c9a23f">

<style>
body{margin:0;font-family:Arial;background:#f6f6f6}
h1,h2,h3{margin:0}
a{text-decoration:none;color:inherit}
button{background:#c9a23f;color:#fff;border:none;padding:10px 16px;border-radius:20px;cursor:pointer}

/* SPLASH */
#splash{
 position:fixed;inset:0;
 background:#fff;
 display:flex;
 align-items:center;
 justify-content:center;
 z-index:9999;
 animation:fadeOut 2s forwards;
}
#splash div{
 width:110px;height:110px;
 background:#c9a23f;color:#fff;
 border-radius:26px;
 display:flex;align-items:center;justify-content:center;
 font-size:48px;
}
@keyframes fadeOut{
 0%{opacity:1}
 85%{opacity:1}
 100%{opacity:0;visibility:hidden}
}

/* HEADER */
header{text-align:center;padding:20px;background:#fff}
header span{color:#c9a23f}

/* CARDS */
.container{padding:15px}
.card{
 background:#fff;
 border-radius:16px;
 padding:16px;
 margin-bottom:15px;
 box-shadow:0 5px 15px rgba(0,0,0,.08);
 animation:up .4s ease;
}
@keyframes up{
 from{opacity:0;transform:translateY(10px)}
 to{opacity:1}
}

/* PAGES */
#newsPage,#adminPanel,#singleNews{display:none}

/* FOOTER */
footer{background:#fff;padding:15px;text-align:center}
footer a{margin:5px}
</style>
</head>

<body>

<div id="splash"><div>EN</div></div>

<header>
<h1>Ehtisham <span>News</span></h1>
<p>Gaming ‚Ä¢ Esports ‚Ä¢ Community</p>
</header>

<!-- HOME -->
<div class="container" id="home">
  <div class="card"><h2>üî• Gaming</h2><button onclick="openNews('gaming')">Read</button></div>
  <div class="card"><h2>üèÜ Esports</h2><button onclick="openNews('esports')">Read</button></div>
  <div class="card"><h2>üë• Community</h2><button onclick="openNews('community')">Read</button></div>
  <div class="card"><h3>üîê Admin</h3><button onclick="openAdmin()">Open</button></div>
</div>

<!-- NEWS LIST -->
<div class="container" id="newsPage">
<h2 id="newsTitle"></h2>
<div id="newsContent"></div>
<button onclick="goHome()">‚¨Ö Back</button>
</div>

<!-- SINGLE NEWS -->
<div class="container" id="singleNews">
<div id="singleContent"></div>
<button onclick="backToList()">‚¨Ö Back</button>
</div>

<!-- ADMIN -->
<div class="container" id="adminPanel">
<h2>Admin Panel</h2>
<input id="aTitle" placeholder="Title"><br><br>
<textarea id="aContent" placeholder="Content"></textarea><br><br>
<select id="aCategory">
<option value="gaming">Gaming</option>
<option value="esports">Esports</option>
<option value="community">Community</option>
</select><br><br>
<button onclick="addNews()">Add News</button>

<hr>
<h3>üîî Notification</h3>
<input id="nTitle" placeholder="Title"><br><br>
<input id="nBody" placeholder="Message"><br><br>
<button onclick="sendNotification()">Send</button>

<br><br>
<button onclick="goHome()">‚¨Ö Back</button>
</div>

<footer>
<h3>Contact Us</h3>
<a href="#">WhatsApp</a> | <a href="#">Facebook</a> | <a href="#">Instagram</a>
</footer>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
 apiKey:"AIzaSyC9Cfh60ZyeZTbhK45a_sKWBFCy8DrqDao",
 authDomain:"ehtisham-news.firebaseapp.com",
 projectId:"ehtisham-news"
});
const db=firebase.firestore();
let currentCat="";
let newsCache=[];
</script>

<script>
function openNews(cat){
 currentCat=cat;
 home.style.display="none";
 newsPage.style.display="block";
 newsTitle.innerText=cat.toUpperCase();
 newsContent.innerHTML="Loading...";

 db.collection("news")
 .where("category","==",cat)
 .orderBy("time","desc")
 .onSnapshot(s=>{
   newsCache=[];
   let h="";
   s.forEach(d=>{
     newsCache.push({...d.data(),id:d.id});
   });
   newsCache.forEach((n,i)=>{
     h+=`
     <div class="card" onclick="openSingle(${i})">
       <h3>${n.title}</h3>
       <p>${n.content.slice(0,80)}...</p>
       <small>Read More ‚Üí</small>
     </div>`;
   });
   newsContent.innerHTML=h||"No news";
 });
}

function openSingle(i){
 newsPage.style.display="none";
 singleNews.style.display="block";
 let n=newsCache[i];
 let next=i+1<newsCache.length?`<br><br><a onclick="openSingle(${i+1})">Next News ‚Üí</a>`:"";
 singleContent.innerHTML=`
 <div class="card">
 <h2>${n.title}</h2>
 <p>${n.content}</p>${next}
 </div>`;
}

function backToList(){
 singleNews.style.display="none";
 newsPage.style.display="block";
}

function openAdmin(){
 home.style.display="none";
 adminPanel.style.display="block";
}

function goHome(){
 newsPage.style.display=singleNews.style.display=adminPanel.style.display="none";
 home.style.display="block";
}

function addNews(){
 db.collection("news").add({
  title:aTitle.value,
  content:aContent.value,
  category:aCategory.value,
  time:Date.now()
 });
 aTitle.value="";aContent.value="";
}

function sendNotification(){
 db.collection("notifications").add({
  title:nTitle.value,
  body:nBody.value,
  time:Date.now()
 });
 alert("Notification Sent");
}
</script>

</body>
</html>
